===
start session with video recording
%require
===
plwr -S plwr-video-test start --video /tmp/plwr-test-recording.webm
---
Started session 'plwr-video-test'

===
navigate and interact
===
plwr -S plwr-video-test open "http://localhost:8599/index.html"
plwr -S plwr-video-test text h1
---
Test Page

===
page content persists (no second window)
===
plwr -S plwr-video-test reload
plwr -S plwr-video-test text h1
---
Test Page

===
stop session saves video
===
plwr -S plwr-video-test stop
---
Stopped session 'plwr-video-test'

===
video file exists and has content
===
wc -c < /tmp/plwr-test-recording.webm | tr -d " "
---
{{ size:number }}
---
where
* size > 0

===
start session with video and interact with form
%require
===
plwr -S plwr-video-test start --video /tmp/plwr-test-interaction.webm
---
Started session 'plwr-video-test'

===
fill form while recording
===
plwr -S plwr-video-test open "http://localhost:8599/form.html"
plwr -S plwr-video-test fill '#name' 'Video Test User'
plwr -S plwr-video-test click '#btn'
plwr -S plwr-video-test text '#result'
---
Hello, Video Test User

===
stop saves interaction video
===
plwr -S plwr-video-test stop
---
Stopped session 'plwr-video-test'

===
interaction video is a valid webm with meaningful size
===
wc -c < /tmp/plwr-test-interaction.webm | tr -d " "
---
{{ size:number }}
---
where
* size > 1000
